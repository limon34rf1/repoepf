<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>–î–Ω–µ–≤–Ω–∏–∫</title>
  <style>
  @font-face {
    font-family: 'Soyuz Grotesk';
    src: url('oyuz-Grotesk-Bold.woff') format('woff'),
         url('oyuz-Grotesk-Bold.otf') format('opentype');
    font-weight: 700;
    font-display: swap;
  }
  :root {
    --yellow: #FFD700;
    --red: #FF4B4B;
    --green: #6EEB83;
    --gray: #f6f8fa;
    --black: #181818;
    --white: #fff;
    --border-radius: 22px;
    --beaver-shadow: #dfbe80a8;
    --card-shadow: 0 1.5px 9px 0 #f5e6b5;
    --bg-gradient: linear-gradient(120deg, #fff 0%, #e8eaf6 100%);
    --bubble-bg: #fff;
    --bubble-color: #473c18;
    --timeline-bg: #fff;
    --timeline-border: #eee;
    --rest-bg: #fcf5e7;
    --rest-bg-dark: #322a20;
    --rest-line: #FFB964;
    --rest-line-dark: #FFC886;
  }
  html.dark, body.dark {
    --black: #faf8f3;
    --white: #232323;
    --gray: #1a1c22;
    --bg-gradient: linear-gradient(120deg, #16171d 0%, #2d283b 100%);
    --beaver-shadow: #232323;
    --card-shadow: 0 2px 13px 0 #442a0b60;
    --bubble-bg: #35364e;
    --bubble-color: #ffe6ad;
    --timeline-bg: #23232b;
    --timeline-border: #3b3758;
    --rest-bg: #322a20;
    --rest-bg-dark: #2a2320;
    --rest-line: #FFB964;
    --rest-line-dark: #FFC886;
  }
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100vh;
    background: var(--bg-gradient);
    font-family: 'Soyuz Grotesk', Arial, sans-serif;
    color: var(--black);
    font-size: clamp(1.07em, 4vw, 1.28em);
    letter-spacing: 0.02em;
    box-sizing: border-box;
    transition: background 0.5s, color 0.4s;
  }
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    overflow-x: hidden;
    background: var(--bg-gradient);
    transition: background 0.5s, color 0.4s;
  }
  header {
    width: 100vw;
    background: var(--white);
    position: sticky;
    top: 0;
    z-index: 10;
    text-align: center;
    box-shadow: 0 3px 12px 0 #eee;
    padding: 23px 0 11px 0;
    transition: background 0.4s;
  }
  .site-title {
    font-family: 'Soyuz Grotesk', Arial, sans-serif;
    font-size: clamp(2em, 6vw, 2.8em);
    font-weight: 700;
    margin-bottom: 10px;
    letter-spacing: 0.04em;
    color: var(--black);
    background: linear-gradient(95deg,#FFD700 60%, #FF4B4B 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    transition: color 0.4s;
  }
  .day-selector {
    display: flex;
    justify-content: center;
    gap: 7px;
    margin-bottom: 0;
    flex-wrap: wrap;
  }
  .day-btn {
    border: none;
    outline: none;
    background: none;
    padding: 8px 15px;
    border-radius: var(--border-radius);
    font-size: clamp(1em, 3.6vw, 1.21em);
    font-family: inherit;
    font-weight: 700;
    color: #555;
    cursor: pointer;
    transition: background .23s, color .13s, box-shadow .13s;
  }
  .day-btn.active, .day-btn:focus {
    background: var(--yellow);
    color: var(--black);
    box-shadow: 0 1.5px 6px #ffe7b8;
  }
  .theme-btn {
    position: absolute;
    top: 21px;
    right: 21px;
    z-index: 15;
    font-size: 1.65em;
    background: none;
    border: none;
    cursor: pointer;
    color: #b4b0ad;
    transition: color 0.2s;
  }
  .theme-btn:hover {color: #ffd700;}
  .main-wrapper {
    width: 100vw;
    max-width: 520px;
    margin: 0 auto;
    padding: 19px 6px 105px 6px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    box-sizing: border-box;
  }
  .timeline-block {
    display: flex;
    align-items: center;
    padding: 12px 9px 12px 6px;
    border-radius: var(--border-radius);
    margin-bottom: 4px;
    background: var(--timeline-bg);
    box-shadow: var(--card-shadow);
    border: 1.2px solid var(--timeline-border);
    opacity: 1;
    transform: translateY(0);
    animation: blockin 0.35s cubic-bezier(.44,1.5,.55,.94) forwards;
    transition: background 0.3s, border 0.3s, color 0.3s, opacity .25s;
    position: relative;
    overflow: hidden;
  }
  .timeline-block.rest-block {
    background: var(--rest-bg);
    color: #c28520;
    font-weight: 700;
    border: 1.8px solid #FFD700;
    box-shadow: 0 2px 18px #ffeabb23;
  }
  .timeline-block.rest-block::before {
    content: "";
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 7px;
    border-radius: 6px 0 0 6px;
    background: linear-gradient(180deg, var(--rest-line), #FFD700 90%);
    box-shadow: 0 1px 7px #ffc98580;
    z-index: 2;
    opacity: .82;
  }
  html.dark .timeline-block.rest-block {
    background: var(--rest-bg-dark);
    color: #ffca77;
  }
  html.dark .timeline-block.rest-block::before {
    background: linear-gradient(180deg, var(--rest-line-dark), #FFD700 95%);
    opacity: .68;
  }
  .timeline-block.active {
    background: linear-gradient(95deg,#fff8d5 0%, #fff 85%);
    box-shadow: 0 2.5px 18px 0 #ffeebb, 0 1.5px 8px #ffd70029;
    border: 2px solid var(--yellow);
    z-index: 2;
  }
  html.dark .timeline-block.active {
    background: linear-gradient(95deg,#33333e 0%, #292740 85%);
    border-color: #FFD700;
  }
  .timeline-block .time {
    width: 70px;
    font-size: 1em;
    font-weight: 700;
    letter-spacing: 0.02em;
    flex-shrink: 0;
    z-index: 3;
  }
  .timeline-block .intensity {
    width: 16px; height: 16px;
    border-radius: 50%;
    margin: 0 10px 0 6px;
    border: 1.5px solid #eee;
    flex-shrink: 0;
    transition: box-shadow .17s, background .18s;
    z-index: 3;
  }
  .intensity.normal {background: var(--yellow);}
  .intensity.hard   {background: var(--red);}
  .intensity.light  {background: var(--green);}
  .timeline-block .task {
    flex: 1;
    font-size: 1.03em;
    font-weight: 500;
    letter-spacing: 0.01em;
    line-height: 1.15;
    display: flex;
    align-items: center;
    gap: 6px;
    z-index: 3;
  }
  @keyframes blockin {
    from { opacity:0; transform: translateY(18px);}
    to   { opacity:1; transform: translateY(0);}
  }
  .timeline-block.hidden-block {
    opacity: 0 !important;
    height: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    pointer-events: none;
    transition: opacity .25s, height .2s;
    overflow: hidden;
    border: none;
    box-shadow: none;
  }
.legend {
    position: fixed;
    left: 50%;
    bottom: 68px; /* —á—É—Ç—å –≤—ã—à–µ show-all-btn */
    transform: translateX(-50%);
    background: rgba(255,255,255,0.91);
    border-radius: 13px;
    box-shadow: 0 2px 9px #ffeebb60;
    display: flex;
    gap: 11px;
    padding: 6px 18px;
    z-index: 119;
    font-size: 1.01em;
    font-weight: 600;
    align-items: center;
    max-width: 90vw;
    transition: background 0.3s;
  }
  html.dark .legend {
    background: rgba(32,32,36,0.93);
    color: #FFD700;
  }
  .legend .dot {
    display: inline-block;
    width: 14px; height: 14px; border-radius: 50%;
    margin-right: 7px; vertical-align: middle;
  }
  .dot.normal { background: var(--yellow);}
  .dot.hard   { background: var(--red);}
  .dot.light  { background: var(--green);}
  @media (max-width: 600px) {
    .legend {
      bottom: 59px;
      font-size: 0.93em;
      gap: 6px;
      padding: 5px 7px;
      max-width: 95vw;
    }
    .legend .dot { width: 11px; height: 11px; margin-right: 4px;}
  }
  .beaver-hold {
    position: fixed;
    right: 20px;
    bottom: 95px;
    z-index: 110;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    pointer-events: none;
    max-width: 90vw;
  }
  .beaver-img {
    width: 90px;
    filter: drop-shadow(0 5px 18px var(--beaver-shadow));
    animation: bobr-pop 0.7s cubic-bezier(.62,2.1,.27,.98);
  }
  @keyframes bobr-pop { from { opacity:0; transform: scale(.84);} to { opacity:1; transform:scale(1);} }
  .bobr-bubble {
    background: var(--bubble-bg);
    border-radius: 13px;
    box-shadow: 0 2px 9px #ffe7b85e;
    font-size: 0.97em;
    font-weight: 500;
    color: var(--bubble-color);
    margin-bottom: 8px;
    padding: 7px 13px;
    max-width: 120px;
    text-align: center;
    animation: fadeinb 0.5s;
    transition: background 0.4s, color 0.4s;
  }
  @keyframes fadeinb { from{opacity:0;} to{opacity:1;} }
  .show-all-btn {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    bottom: 12px;
    z-index: 120;
    background: rgba(250,248,236,0.97);
    color: #a98912;
    border: none;
    font-size: 1.07em;
    font-weight: 700;
    border-radius: 13px;
    padding: 10px 22px;
    box-shadow: 0 2px 13px #f3dc9f5e;
    cursor: pointer;
    transition: background 0.2s, color 0.18s;
    outline: none;
    letter-spacing: 0.03em;
    opacity: 0.92;
  }
  .show-all-btn:hover {background: #FFD700; color: #181818; opacity:1;}
  html.dark .show-all-btn {
    background: #302b44;
    color: #FFD700;
    box-shadow: 0 1.5px 8px #221d2f8a;
  }
  @media (max-width: 500px) {
    .beaver-hold { right: 4px; bottom: 100px; }
    .show-all-btn { font-size: 0.96em; padding: 8px 11px;}
  }
  .show-all-btn:hover {background: #FFD700; color: #181818; opacity:1;}
  html.dark .show-all-btn {
    background: #302b44;
    color: #FFD700;
    box-shadow: 0 1.5px 8px #221d2f8a;
  }
  @media (max-width: 500px) {
    .main-wrapper {padding: 8px 2vw 120px 2vw;}
    .site-title { font-size:2em; }
    .legend {font-size:0.93em; padding: 6px 4px;}
    .timeline-block .time {width:56px;}
    .beaver-img {width:65px;}
    .bobr-bubble {font-size: 0.94em; max-width: 100px;}
    .beaver-hold {right: 4px;}
    .theme-btn {top:12px; right:10px; font-size:1.3em;}
    .show-all-btn {padding: 8px 11px; font-size: 0.96em;}
  }
  </style>
</head>
<body>
  <header>
    <button class="theme-btn" id="themeBtn" title="–¢–µ–º–Ω–∞—è —Ç–µ–º–∞">üåô</button>
    <div class="site-title">–ú–æ–π –¥–µ–Ω—å</div>
    <nav class="day-selector" id="day-selector"></nav>
  </header>
  <main class="main-wrapper" id="main"></main>
  <div class="legend">
    <span><span class="dot normal"></span>–Ω–æ—Ä–º–∏—Å</span>
    <span><span class="dot hard"></span>—Ö–∞—Ä9</span>
    <span><span class="dot light"></span>–ª–∞–π—Ç–≤–∞</span>
  </div>
  <div class="beaver-hold" id="beaver-hold" style="display:none"></div>
  <button class="show-all-btn" id="showAllBtn" style="display:none"></button>

  <script>
  // === –î–ê–ù–ù–´–ï ===
  const WEEKDAYS = [
    { id: 'monday',    ru: '–ü–ù' },
    { id: 'tuesday',   ru: '–í–¢' },
    { id: 'wednesday', ru: '–°–†' },
    { id: 'thursday',  ru: '–ß–¢' },
    { id: 'friday',    ru: '–ü–¢' },
    { id: 'saturday',  ru: '–°–ë' },
    { id: 'sunday',    ru: '–í–°' }
  ];
const SCHEDULE = {
  monday: [
    { time: '09:00-09:30', task: '–∑–∞—Ä—è–¥–∫–∞', intensity: 'normal' },
    { time: '09:30-10:00', task: '–∑–∞–≤—Ç—Ä–∞–∫', intensity: 'normal' },
    { time: '10:00-11:45', task: '–æ–ª–∏–º–ø–∏–∞–¥–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –≤—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã–µ', intensity: 'hard' },
    { time: '12:00-13:15', task: '–¥–∑ –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –û–ì–≠', intensity: 'normal' },
    { time: '13:15-14:15', task: '–æ–±–µ–¥', intensity: 'normal' },
    { time: '14:15-15:45', task: '–∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö: –ø—Ä–∞–∫—Ç–∏–∫–∞ –Ω–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞—Ö', intensity: 'normal' },
    { time: '16:00-17:00', task: '–æ—Ç–¥—ã—Ö / —Å–≤–æ–±–æ–¥–Ω–æ–µ –æ–∫–Ω–æ', intensity: 'light' },
    { time: '17:00-18:00', task: '–∞–ª–≥–æ—Ä–∏—Ç–º—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö', intensity: 'hard' },
    { time: '18:00-18:30', task: '—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞, –ø—Ä–æ–≥—É–ª–∫–∞', intensity: 'normal' },
    { time: '18:45-19:15', task: '—É–∂–∏–Ω', intensity: 'normal' },
    { time: '19:15-20:30', task: '–û–ì–≠ –ø–æ —Ñ–∏–∑–∏–∫–µ –∏–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞', intensity: 'normal' },
    { time: '20:45-21:15', task: '—Ä–µ—Ñ–ª–µ–∫—Å–∏—è –¥–Ω—è, –ª—ë–≥–∫–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞, –æ—Ç–¥—ã—Ö', intensity: 'light' },
    { time: '23:30-09:00', task: '—Å–æ–Ω', intensity: 'normal' }
  ],
  tuesday: [
    { time: '09:00-09:30', task: '–∑–∞—Ä—è–¥–∫–∞', intensity: 'normal' },
    { time: '09:30-10:00', task: '–∑–∞–≤—Ç—Ä–∞–∫', intensity: 'normal' },
    { time: '10:00-11:45', task: '—Ñ–∏–∑–∏–∫–∞: —Ç–µ–æ—Ä–∏—è + –ø—Ä–∞–∫—Ç–∏–∫–∞', intensity: 'hard' },
    { time: '12:00-13:15', task: '—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –ø—Ä–∞–∫—Ç–∏–∫–∞', intensity: 'normal' },
    { time: '13:15-14:15', task: '–æ–±–µ–¥', intensity: 'normal' },
    { time: '14:15-15:45', task: 'Python/ML: –∫–æ–¥–∏–Ω–≥ —Å –ø–æ–ª—É—ç–∫—Å–ø–µ—Ä—Ç–æ–º', intensity: 'normal' },
    { time: '16:00-17:00', task: '–æ—Ç–¥—ã—Ö / —Ö–æ–±–±–∏ / —Ä–µ–∑–µ—Ä–≤', intensity: 'light' },
    { time: '17:00-18:00', task: '–æ–ª–∏–º–ø–∏–∞–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ (–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞/–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞)', intensity: 'hard' },
    { time: '18:00-18:30', task: '–ø—Ä–æ–≥—É–ª–∫–∞/—Å–ø–æ—Ä—Ç', intensity: 'normal' },
    { time: '18:45-19:15', task: '—É–∂–∏–Ω', intensity: 'normal' },
    { time: '19:15-20:30', task: '–ø—Ä–∞–∫—Ç–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö, ML', intensity: 'normal' },
    { time: '20:45-21:15', task: '—Ä–µ—Ñ–ª–µ–∫—Å–∏—è –¥–Ω—è, –æ—Ç–¥—ã—Ö', intensity: 'light' },
    { time: '23:30-09:00', task: '—Å–æ–Ω', intensity: 'normal' }
  ],
  wednesday: [
    { time: '09:30-10:00', task: '–∑–∞–≤—Ç—Ä–∞–∫', intensity: 'normal' },
    { time: '10:00-12:00', task: '–æ–ª–∏–º–ø–∏–∞–¥–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞: –ø—Ä–∞–∫—Ç–∏–∫–∞', intensity: 'hard' },
    { time: '12:15-13:15', task: '–æ—Ç–¥—ã—Ö / –¥–ª–∏–Ω–Ω–∞—è –ø—Ä–æ–≥—É–ª–∫–∞', intensity: 'light' },
    { time: '13:15-14:15', task: '–æ–±–µ–¥', intensity: 'normal' },
    { time: '14:15-15:45', task: '–ª—ë–≥–∫–∞—è —Ç–µ–º–∞ –ø–æ –≤—ã–±–æ—Ä—É, —Ö–æ–±–±–∏', intensity: 'light' },
    { time: '16:00-17:00', task: '–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–∑–∏–∫–∞ –∏–ª–∏ –ø—Ä–æ–µ–∫—Ç', intensity: 'normal' },
    { time: '17:00-17:30', task: '–ø–µ—Ä–µ—Ä—ã–≤ / –ª—ë–≥–∫–∞—è –∑–∞—Ä—è–¥–∫–∞', intensity: 'light' },
    { time: '18:00-18:45', task: '—É–∂–∏–Ω', intensity: 'normal' },
    { time: '19:00-20:00', task: '—Ä–∞–∑–±–æ—Ä –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–≥–æ, –≤–æ–ø—Ä–æ—Å—ã, –¥–∑', intensity: 'normal' },
    { time: '20:00-21:15', task: '–æ—Ç–¥—ã—Ö, –Ω–µ—Ç —É—á–µ–±—ã', intensity: 'light' },
    { time: '23:30-09:00', task: '—Å–æ–Ω', intensity: 'normal' }
  ],
  thursday: [
    { time: '09:00-09:30', task: '–∑–∞—Ä—è–¥–∫–∞', intensity: 'normal' },
    { time: '09:30-10:00', task: '–∑–∞–≤—Ç—Ä–∞–∫', intensity: 'normal' },
    { time: '10:00-11:30', task: '–∞–ª–≥–æ—Ä–∏—Ç–º—ã, –æ–ª–∏–º–ø–∏–∞–¥–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞', intensity: 'hard' },
    { time: '11:45-13:15', task: '—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞/–∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö: –ø—Ä–æ–µ–∫—Ç', intensity: 'normal' },
    { time: '13:15-14:15', task: '–æ–±–µ–¥', intensity: 'normal' },
    { time: '14:15-15:45', task: '—Ñ–∏–∑–∏–∫–∞: –∑–∞–¥–∞—á–∏', intensity: 'normal' },
    { time: '16:00-17:00', task: '–æ—Ç–¥—ã—Ö/—Ä–µ–∑–µ—Ä–≤', intensity: 'light' },
    { time: '17:00-18:30', task: 'Python/ML –ø—Ä–∞–∫—Ç–∏–∫–∞', intensity: 'hard' },
    { time: '18:30-19:00', task: '–ø—Ä–æ–≥—É–ª–∫–∞/—Å–ø–æ—Ä—Ç', intensity: 'normal' },
    { time: '19:00-19:45', task: '—É–∂–∏–Ω', intensity: 'normal' },
    { time: '20:00-21:00', task: '–æ–ª–∏–º–ø–∏–∞–¥–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞: –Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏', intensity: 'normal' },
    { time: '21:00-21:30', task: '–∏—Ç–æ–≥–∏ –¥–Ω—è, –æ—Ç–¥—ã—Ö', intensity: 'light' },
    { time: '23:30-09:00', task: '—Å–æ–Ω', intensity: 'normal' }
  ],
  friday: [
    { time: '09:00-09:30', task: '–∑–∞—Ä—è–¥–∫–∞', intensity: 'normal' },
    { time: '09:30-10:00', task: '–∑–∞–≤—Ç—Ä–∞–∫', intensity: 'normal' },
    { time: '10:00-11:45', task: '–∏—Ç–æ–≥–æ–≤–∞—è –æ–ª–∏–º–ø–∏–∞–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞', intensity: 'hard' },
    { time: '12:00-13:15', task: '—Ñ–∏–∑–∏–∫–∞: —Ä–∞–∑–±–æ—Ä –æ—à–∏–±–æ–∫', intensity: 'normal' },
    { time: '13:15-14:15', task: '–æ–±–µ–¥', intensity: 'normal' },
    { time: '14:15-15:45', task: '–∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ–µ–∫—Ç "–ë–æ–ª—å—à–∏–µ –≤—ã–∑–æ–≤—ã"', intensity: 'normal' },
    { time: '16:00-17:00', task: '—Ä–µ–∑–µ—Ä–≤/–æ—Ç–¥—ã—Ö', intensity: 'light' },
    { time: '17:00-18:00', task: 'Python/–∞–ª–≥–æ—Ä–∏—Ç–º—ã, ML', intensity: 'hard' },
    { time: '18:00-18:30', task: '—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞, –ø—Ä–æ–≥—É–ª–∫–∞', intensity: 'normal' },
    { time: '18:45-19:15', task: '—É–∂–∏–Ω', intensity: 'normal' },
    { time: '19:30-20:30', task: '—Ä–µ—Ñ–ª–µ–∫—Å–∏—è –∑–∞ –Ω–µ–¥–µ–ª—é, –∞–Ω–∞–ª–∏–∑, —Ü–µ–ª–∏', intensity: 'light' },
    { time: '23:30-09:00', task: '—Å–æ–Ω', intensity: 'normal' }
  ],
  saturday: [
    { time: '09:30-10:00', task: '–∑–∞–≤—Ç—Ä–∞–∫', intensity: 'normal' },
    { time: '10:00-11:30', task: '–æ–ª–∏–º–ø–∏–∞–¥–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞', intensity: 'hard' },
    { time: '11:45-13:15', task: '–æ–ª–∏–º–ø–∏–∞–¥–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞', intensity: 'hard' },
    { time: '13:15-14:15', task: '–æ–±–µ–¥', intensity: 'normal' },
    { time: '14:15-15:45', task: '–∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö: —Å–≤–æ–±–æ–¥–Ω—ã–π –≤—ã–±–æ—Ä –∑–∞–¥–∞—á–∏', intensity: 'normal' },
    { time: '16:00-17:00', task: '–æ—Ç–¥—ã—Ö / –≤—Å—Ç—Ä–µ—á–∞ —Å –¥—Ä—É–≥–æ–º', intensity: 'light' },
    { time: '17:00-18:00', task: '–ø—Ä–æ–µ–∫—Ç –ø–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ', intensity: 'normal' },
    { time: '18:00-18:30', task: '—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞, –ø—Ä–æ–≥—É–ª–∫–∞', intensity: 'normal' },
    { time: '18:45-19:15', task: '—É–∂–∏–Ω', intensity: 'normal' },
    { time: '19:30-21:00', task: '–ª—ë–≥–∫–∞—è –æ–ª–∏–º–ø–∏–∞–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞/–ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ', intensity: 'light' },
    { time: '23:30-09:00', task: '—Å–æ–Ω', intensity: 'normal' }
  ],
  sunday: [
    { time: '09:30-10:00', task: '–∑–∞–≤—Ç—Ä–∞–∫', intensity: 'normal' },
    { time: '10:00-12:00', task: '–ø—Ä–æ–≥—É–ª–∫–∞, —Ö–æ–±–±–∏, –ø–æ–ª–Ω–æ–µ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ', intensity: 'light' },
    { time: '12:15-13:15', task: '–æ–±–µ–¥', intensity: 'normal' },
    { time: '13:30-14:30', task: '—Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è / –Ω–∏—á–µ–≥–æ –Ω–µ –ø–ª–∞–Ω–∏—Ä—É–π', intensity: 'light' },
    { time: '14:30-15:30', task: '–ª–∞–π—Ç–æ–≤–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å—É (–Ω–µ —É—á—ë–±–∞!)', intensity: 'light' },
    { time: '16:00-17:00', task: '—Ä–µ–∑–µ—Ä–≤: –¥–æ–ø. –æ—Ç–¥—ã—Ö –∏–ª–∏ –∫—Ä–µ–∞—Ç–∏–≤', intensity: 'light' },
    { time: '17:00-17:45', task: '—É–∂–∏–Ω', intensity: 'normal' },
    { time: '18:00-19:00', task: '—Ä–µ—Ñ–ª–µ–∫—Å–∏—è –Ω–µ–¥–µ–ª–∏, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–ª–∞–Ω–∞', intensity: 'light' },
    { time: '19:00-23:00', task: '—Ñ–∏–ª—å–º—ã, –æ–±—â–µ–Ω–∏–µ, –≤–æ–æ–±—â–µ –Ω–µ —É—á—ë–±–∞', intensity: 'light' },
    { time: '23:30-09:00', task: '—Å–æ–Ω', intensity: 'normal' }
  ]
};

function getMoscowDate() {
  let now = new Date();
  let utc = now.getTime() + now.getTimezoneOffset() * 60000;
  return new Date(utc + 3 * 3600000);
}

  function getActiveBlockIdx(schedule, d) {
    let h = d.getHours(), m = d.getMinutes();
    for (let i = 0; i < schedule.length; ++i) {
      let [start, end] = schedule[i].time.split('-');
      let [hs, ms] = start.split(':').map(Number);
      let [he, me] = end.split(':').map(Number);
      let startMins = hs*60 + ms, endMins = he*60 + me;
      let nowMins = h*60 + m;
      if (nowMins < endMins) return i;
    }
    return schedule.length-1;
  }
  function getBeaverInfo(task, hour) {
    task = (task||"").toLowerCase();
    if (/–µ–¥–∞|–∑–∞–≤—Ç—Ä–∞–∫|–æ–±–µ–¥|—É–∂–∏–Ω/.test(task)) return {img:"beaver-eat.png", tip:"–ù–µ –∑–∞–±—É–¥—å –ø–æ–¥–∫—Ä–µ–ø–∏—Ç—å—Å—è!"};
    if (/—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞|–∑–∞—Ä—è–¥–∫–∞|—Å–ø–æ—Ä—Ç|–ø—Ä–æ–≥—É–ª–∫–∞/.test(task)) return {img:"beaver-gym.png", tip:"–†–∞–∑–º–Ω–∏—Å—å, –∫–∞–∫ –±–æ–±—Ä!"};
    if (/–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞|–∞–Ω–∞–ª–∏–∑|python|–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞|–¥–∑|–ø—Ä–∞–∫—Ç–∏–∫–∞|–∞–ª–≥–æ—Ä–∏—Ç–º|—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞/.test(task)) return {img:"beaver-study.png", tip:"–£—á–∏—Å—å, –∫–∞–∫ –±–æ–±—Ä!"};
    if (/—Å–æ–Ω/.test(task) || hour >= 0 && hour < 7) return {img:"beaver-sleep.png", tip:"–í—Ä–µ–º—è —Å–ø–∞—Ç—å!"};
    return {img:"beaver-default.png", tip:"–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!"};
  }
  // –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –±–ª–æ–∫ "–æ—Ç–¥—ã—Ö–æ–º" –∏–ª–∏ "–µ–¥–æ–π"
  function isRestTask(task) {
    return /–æ–±–µ–¥|–æ—Ç–¥—ã—Ö|—Ä–∞–∑–≥—Ä—É–∑–∫–∞|–ø–µ—Ä–µ–∫—É—Å|—É–∂–∏–Ω|–∑–∞–≤—Ç—Ä–∞–∫/.test((task||"").toLowerCase());
  }

  const main = document.getElementById('main');
  const selector = document.getElementById('day-selector');
  const beaverHold = document.getElementById('beaver-hold');
  const showAllBtn = document.getElementById('showAllBtn');
  let selectedDay = null;
  let showAll = false;

  function renderSelector(today) {
    selector.innerHTML = "";
    WEEKDAYS.forEach((d,i)=>{
      let btn = document.createElement('button');
      btn.className = "day-btn" + (selectedDay===d.id ? " active" : "");
      btn.textContent = d.ru;
      btn.onclick = ()=>{
        selectedDay = d.id;
        showAll = false;
        renderAll();
      };
      selector.appendChild(btn);
    });
  }
  function renderTimeline(schedule, activeIdx) {
    main.innerHTML = "";
    schedule.forEach((block, i) => {
      let div = document.createElement('div');
      let isRest = isRestTask(block.task);
      let hidden = !showAll && i < activeIdx;
      div.className = "timeline-block" 
        + (i === activeIdx ? " active" : "")
        + (isRest ? " rest-block" : "")
        + (hidden ? " hidden-block" : "");
      div.style.animationDelay = (i*0.03)+'s';
      let dot = `<div class="intensity ${block.intensity}"></div>`;
      div.innerHTML = `<div class="time">${block.time}</div>${dot}<div class="task">${block.task}</div>`;
      main.appendChild(div);
    });
    setTimeout(()=>{
      let ab = main.querySelector('.timeline-block.active');
      if (ab && ab.scrollIntoView) ab.scrollIntoView({behavior:'smooth', block:'center'});
    }, 120);
  }
  function renderBeaver(schedule, idx, msk) {
    let block = schedule[idx]||{};
    let hour = msk.getHours();
    let bvr = getBeaverInfo(block.task, hour);
    beaverHold.innerHTML = `
      <img src="${bvr.img}" class="beaver-img" alt="–ë–æ–±—Ä">
      <div class="bobr-bubble">${bvr.tip}</div>
    `;
    beaverHold.style.display = "flex";
  }
  function renderShowAllBtn(schedule, activeIdx) {
    showAllBtn.textContent = showAll ? "–°–∫—Ä—ã—Ç—å –ø—Ä–æ—à–µ–¥—à–∏–µ" : "–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—à–µ–¥—à–∏–µ";
    showAllBtn.style.display = schedule.length>1 ? "block":"none";
    showAllBtn.onclick = ()=>{ showAll = !showAll; renderAll(); };
  }
  function renderAll() {
    let msk = getMoscowDate();
    let todayIdx = msk.getDay();
    let today = WEEKDAYS[(todayIdx+6)%7].id;
    if (!selectedDay) selectedDay = today;
    renderSelector(today);
    let schedule = SCHEDULE[selectedDay];
    let activeIdx = selectedDay===today ? getActiveBlockIdx(schedule, msk) : 0;
    renderTimeline(schedule, activeIdx);
    renderBeaver(schedule, activeIdx, msk);
    renderShowAllBtn(schedule, activeIdx);
  }

  // ==== –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ ====
  const themeBtn = document.getElementById('themeBtn');
  function setTheme(dark) {
    if (dark) {
      document.documentElement.classList.add('dark');
      document.body.classList.add('dark');
      themeBtn.textContent = '‚òÄÔ∏è';
      themeBtn.title = "–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞";
      localStorage.setItem('bobr-theme','dark');
    } else {
      document.documentElement.classList.remove('dark');
      document.body.classList.remove('dark');
      themeBtn.textContent = 'üåô';
      themeBtn.title = "–¢—ë–º–Ω–∞—è —Ç–µ–º–∞";
      localStorage.setItem('bobr-theme','light');
    }
  }
  themeBtn.onclick = ()=>{
    setTheme(!document.documentElement.classList.contains('dark'));
  };
  if (localStorage.getItem('bobr-theme')==='dark') setTheme(true);
  else setTheme(false);

  renderAll();
  setInterval(renderAll, 60000);
  </script>
</body>
</html>
